(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{393:function(e,t,a){"use strict";a.r(t);var n=a(45),r=Object(n.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("blockquote",[a("p",[e._v("框架如何使用数据迁移及填充\n文档为个人的使用总结\n如有问题请及时指正")])]),e._v(" "),a("h4",{attrs:{id:"_1、背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、背景","aria-hidden":"true"}},[e._v("#")]),e._v(" 1、背景")]),e._v(" "),a("p",[e._v("问题1：为什么要使用呢？\n问题2：使用它们有什么好处呢？")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("每次上线等操作  都需要手动执行sql脚本  效率低  且容易忘记 造成线上出现问题\n使用它们可以更好 更方便的操作数据库的更改 更新生产环境时 只需要执行命令就搞定\n")])])]),a("h4",{attrs:{id:"_2、数据迁移的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、数据迁移的使用","aria-hidden":"true"}},[e._v("#")]),e._v(" 2、数据迁移的使用")]),e._v(" "),a("ol",[a("li",[e._v("创建迁移文件\n1.1 进入项目目录执行 php think migrate:create AddUserRechargeField\n1.2 需要注意的是 大驼峰命名法\n1.3 会在项目目录/database/migrations/创建以当前日期为开头的文件")]),e._v(" "),a("li",[e._v("书写迁移的代码\n2.1 创建的迁移文件中有注释 可以使用的方法\n2.2 "),a("code",[e._v("change")]),e._v("方法是tp的大坑  直接删除掉\n2.3 新建 up和down方法\n2.4 填写需要写的代码")]),e._v(" "),a("li",[e._v("执行\n3.1 执行"),a("code",[e._v("php think migrate:run")]),e._v(" 会自动执行"),a("code",[e._v("up")]),e._v("方法\n3.2 执行"),a("code",[e._v("php think migrate:rollback")]),e._v(" 会自动执行"),a("code",[e._v("down")]),e._v("方法\n4.End")])]),e._v(" "),a("h4",{attrs:{id:"_3-数据填充操作简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-数据填充操作简介","aria-hidden":"true"}},[e._v("#")]),e._v(" 3. 数据填充操作简介")]),e._v(" "),a("ol",[a("li",[e._v("创建填充文件\n1.1 php think seed:create ChangeRechargeShopNameDefault\n1.2 文件命名规则 大驼峰")]),e._v(" "),a("li",[e._v("写数据库的操作命令\n2.1 和平常一样  数据库的增删查等")]),e._v(" "),a("li",[e._v("执行\n3.1 php think seed:run -s ChangeRechargeShopNameDefault\n3.2 "),a("code",[e._v("如果不加 -s 指定执行的填充文件 则会全部执行一遍填充 需谨慎执行")]),e._v(" "),a("a",{attrs:{href:"https://blog.csdn.net/huaweichenai/article/details/100043935",target:"_blank",rel:"noopener noreferrer"}},[e._v("参考网站"),a("OutboundLink")],1)])])])},[],!1,null,null,null);t.default=r.exports}}]);